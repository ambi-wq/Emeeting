{% include "header.html" %}
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>eMeeting</title>-->
<!--     {% load static %}-->

<!--    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" />-->
<!--   &lt;!&ndash; <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css" media="all" >&ndash;&gt;-->
<!--    <link rel="stylesheet" href="/static/css/bootstrap.css"/>-->
<!--    <link rel="stylesheet" href="/static/css/bootstrap-responsive.css"/>-->
<!--     <link rel="stylesheet" href="/static/css/style.css"/>-->
<!--    <link rel="stylesheet" href="/static/css/login.css"/>-->
<!--    &lt;!&ndash;<link rel="stylesheet" href="/static/css/style-responsive.css"/>&ndash;&gt;-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->

<!--    &lt;!&ndash;<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>&ndash;&gt;-->
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->

<!--    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->

<!--    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>-->
<!--    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>-->
<!--</head>-->
<!--<style>-->



<!--</style>-->
<!--<script type="text/javascript">-->
<!--function getHeight() {-->

<!--            var height = document.body.scrollHeight;-->
<!--            console.log("height===>"+height);-->
<!--            var content = $('#content').css("min-height", height);-->
<!--        }-->
<!--    </script>-->
<!--<body onload="getHeight()">-->
<!--&lt;!&ndash; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++header start+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->
<!--<div class="navbar">-->
<!--            <div class="navbar">-->
<!--                <div class="container-fluid" style="padding-left: 0px !important; ">-->


<!--&lt;!&ndash;                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                    </a>&ndash;&gt;-->
<!--                    <a class="brand" href="#"><span>-->
<!--                        <span style="color:#569AEB;font-size:XX-Large;">eMeeting</span>-->
<!--                        </span></a>-->

<!--                    &lt;!&ndash; start: Header Menu &ndash;&gt;-->
<!--                    <div class="nav-no-collapse header-nav">-->
<!--                        <ul class="nav pull-right">-->
<!--                            <li>-->
<!--                                <a id="ctl00_LinkButton2" class="btn" href=""> Change password</a></li>-->
<!--                            <li class="dropdown hidden-phone"></li>-->
<!--                            <li>-->
<!--                                <a id="ctl00_LinkButton1" class="btn dropdown-toggle" href=""><i class="icon-off"></i>  Log Out</a></li>-->
<!--                        </ul>-->
<!--                    </div>-->



<!--                    &lt;!&ndash; end: Header Menu &ndash;&gt;-->

<!--                </div>-->
<!--            </div>-->
<!--            <div class="container" style="text-align: right; background: #569aeb;color: #fff;padding:0.5%;width:100%;">-->
<!--                <span id="ctl00_lblLogin" style="font-weight:bold;"> Last Login :- Administrator 2020-10-28  10:07AM</span>-->
<!--            </div>-->
<!--        </div>-->





<!--<div class="row" style="height:100vh;margin-top:0px; margin-right: 0px; margin-left: 0px;float:left;">-->
<!--<div id="sidebar1" class="sidenav" style="height:100vh!important;overflow-y:auto;">-->
<!--                &lt;!&ndash; start: Main Menu &ndash;&gt;-->
<!--&lt;!&ndash;                <div id="sidebar-left" class="span2">&ndash;&gt;-->
<!--                    <div class="nav-collapse sidebar-nav" >-->
<!--                        <ul class="nav nav-tabs nav-stacked main-menu" style="height: 100vh;width: 210px;border-right: 2px solid #7b7b7b91;background:#fff;">-->
<!--                            <li id="ctl00_m2" class="none"><a href="{{baseURL}}manageMeeting"><span class="hidden-tablet">Meeting</span></a></li>-->
<!--                            <li id="ctl00_m1" class="none"><a href="{{baseURL}}manageUser"><span class="hidden-tablet">User Management</span></a></li>-->
<!--                            <li id="ctl00_m3" class="none"><a href="{{baseURL}}manageCommittee"><span class="hidden-tablet">Committee</span></a></li>-->
<!--                            <li id="ctl00_m4" class="none"><a href="{{baseURL}}manageActivityLogs"><span class="hidden-tablet">Activity Logs</span></a></li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--                &lt;!&ndash; end: Main Menu &ndash;&gt;-->
<!--&lt;!&ndash;                <div style="min-height: 100vh;"></div>&ndash;&gt;-->

<!--            </div>-->
<!--</div>-->

<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++  header end +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<style>

#loader {
    position: absolute;
    width: 100%;
    height: 100%;
    text-align: center;
    color: #fff;

    background: rgba(0, 0, 0, 0.5);
    padding-top: 35%;
    display: none;
}
#loader p {
  position: absolute;
color: #fff;

    font-weight: 700;
   left:45%;
font-size: 20px;
    text-align: center;
     font-family: 'Raleway', sans-serif;
}
</style>
{% if messages %}
	{% for message in messages %}
	   <script>alert("{{ message }}")</script>
	{% endfor %}
{% endif %}


 <script>
    {% if message %}
      alert("{{ message }}")
    {% endif %}
</script>




<div id="content_manageuser" style="min-height: 792px;">
    <!-- Image loader -->
<div id='loader' style='display:none ;'>
    <p>Loading....</p>
</div>
<!-- Image loader -->

    <div class="sortable ui-sortable">
        <div class="box span11 topmargin" style="margin-left:15px;width:1100px;">

             <div class="box-header">
        <div style="width: 68%; float:left;">
            <h2 style="font-size: large;"><i class="glyphicon glyphicon-tasks"></i><span class="break"></span>Manage User</h2>
        </div>
        {% if length > 0 %}
                <div style="width: 14%; float: left;cursor:pointer;">
                    <input type="submit"  name="ctl00$ContentPlaceHolder1$Button2" value="Remove User"
                           onclick="removeUser()" id="ctl00_ContentPlaceHolder1_Button2" class="removebutton" style="margin: 4px 2px;">
                </div>
                <div style="width: 14%; float: left">
                    <input type="submit" name="ctl00$ContentPlaceHolder1$ExpoCSV" value="Download CSV Report"
                           id="ctl00_ContentPlaceHolder1_ExpoCSV" class="sub2button"
                           onclick="location.href='{{baseURL}}downloadUsers';" >
                </div>
                 {% else %}

                            <input type="submit"  name="ctl00$ContentPlaceHolder1$Button2" value="Remove User"
                                   onclick="removeUser()" id="ctl00_ContentPlaceHolder1_Button22"  style="margin: 4px 2px;display:none;">

                            <input type="submit" name="ctl00$ContentPlaceHolder1$ExpoCSV" value="Download CSV Report"
                                   id="ctl00_ContentPlaceHolder1_ExpoCSVV"
                                   onclick="location.href='{{baseURL}}downloadUsers';" style="display:none;">

                 {% endif %}
    </div>
              <hr class="hrborder" style=" margin-top: 1px;
margin-bottom: 40px;">

              <div style="display: block;margin-left: 6px;" class="box-content">
        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
            <div class="row-fluid">

                <table style="width: 100%;">
                    <tbody>

                        <tr>
                            <td>&nbsp;</td>
                            <td></td>
                            <td>&nbsp;</td>
                            <td style="width:180px;">
                               <!--<select name="ctl00$ContentPlaceHolder1$ddlCat" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <option selected="selected" value="0">Select Committee</option>
                                    <option value="1">Board Committee</option>
                                    <option value="2">Audit Committee</option>
                                    <option value="3">HR Committee</option>
                                </select>-->

                                <select style="width:150px;" name="ctl00$ContentPlaceHolder1$ddlCat" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <!--<option  value="0">Select Committee</option>-->

<!--                                    {% for committee in committee_array %}-->
<!--                                            <option value="{{ committee.fid }}">{{ committee.fname }}</option>-->
<!--                                    {% endfor %}-->

                                    {% if committe_id == "" or committe_id == "0" %}
                                            <option value="{{ committe_id  }}">{{ committee_name }}</option>
                                    {% else %}
                                            <option value="{{ committe_id  }}">{{ committee_name }}</option>
                                            <option value="0">Select Committee</option>
                                    {% endif %}

                                    {% for committee in committee_array %}


                                            {% if committe_id == committee.fid %}
                                                <option value="{{ committee.fid }}" style="display:none">{{ committee.fname }}</option>
                                            {% else %}
                                                <option value="{{ committee.fid }}">{{ committee.fname }}</option>
                                            {% endif %}
                                    {% endfor %}
                                </select>

                                <!--<select name="ctl00$ContentPlaceHolder1$ddlCat" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <option selected="selected" value="{{baseURL}}manageUser?f=All">Select Committee</option>
                                    <option value="{{baseURL}}manageUser?f=1">Board Committee</option>
                                    <option value="{{baseURL}}manageUser?f=2">Audit Committee</option>
                                    <option value="{{baseURL}}manageUser?f=3">HR Committee</option>
                                </select>-->
                            </td>

                            <td style="width:180px;">
                                <select style="width:150px;" name="ctl00$ContentPlaceHolder1$dropUsertype" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_dropUsertype" class="input-medium">

                                    {% if usertype == "" or usertype == "0"%}
                                            <option value="{{usertype}}">{{utype_name}}</option>
                                    {%else%}
                                        <option value="{{usertype}}">{{utype_name}}</option>


                                    {%endif%}

                                    {% for user in usertype_arr%}

                                    {% if usertype == user.uid %}
                                        <option value="{{ user.uid }}" style="display:none">{{ user.utype }}</option>
                                    {% else%}
                                        <option value="{{ user.uid }}">{{ user.utype }}</option>
                                    {%endif%}
                                    {% endfor %}

                                    <!--<option value="0">All user type</option>
                                    <option value="1">CMS user</option>
                                    <option value="2">iPad user</option>
-->
                                </select>
                                <!--<select name="ctl00$ContentPlaceHolder1$dropUsertype" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_dropUsertype" class="input-medium">
                                    <option selected="selected" value="{{baseURL}}manageUser?f=All">All user type</option>
                                    <option value="{{baseURL}}manageUser?u=1">CMS user</option>
                                    <option value="{{baseURL}}manageUser?u=2">iPad user</option>

                                </select>-->
                            </td>


                            <td style="width:60px;">Display :</td>
<!--                            <td>:</td>-->
                            <td style="width:190px;">
                                <select style="width:100px;" name="ctl00$ContentPlaceHolder1$DropDownList1" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_DropDownList1" class="input-mini">
                                    <!--<option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="30">30</option>
                                    <option value="40">40</option>
                                    <option value="50">50</option>-->

                                         {% if display == "10" %}
                                            <option value="{{ display }}">{{ display }}</option>
                                        {% else %}
                                            <option value="{{ display }}">{{ display }}</option>

                                        {% endif %}
                                        {% for dl in display_list%}
                                            {% if dl == display %}
                                                <option value="{{ dl }}" style="display:none">{{ dl }}</option>
                                            {% else %}
                                                <option value="{{ dl }}">{{ dl}}</option>
                                            {% endif %}
                                        {% endfor %}



                                </select>


                                <!--<select name="ctl00$ContentPlaceHolder1$DropDownList1" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_DropDownList1" class="input-mini">
                                    <option selected="selected" value="{{baseURL}}manageUser?d=10">10</option>
                                    <option value="{{baseURL}}manageUser?d=20">20</option>
                                    <option value="{{baseURL}}manageUser?d=30">30</option>
                                    <option value="{{baseURL}}manageUser?d=40">40</option>
                                    <option value="{{baseURL}}manageUser?d=50">50</option>
                                </select>-->
                                Records</td>


                            <td style="width:220px;">
                                {% if txt == "" or txt == None%}
                                    <input name="ctl00$ContentPlaceHolder1$txtEmployee" type="text" id="ctl00_ContentPlaceHolder1_txtEmployee" class="input-medium" placeholder="Username/Email/Name" onkeydown="return (event.keyCode!=13);" autocomplete="off">
                                {% else %}
                                    <input name="ctl00$ContentPlaceHolder1$txtEmployee" type="text" id="ctl00_ContentPlaceHolder1_txtEmployee1" class="input-medium" placeholder="Username/Email/Name" onkeydown="return (event.keyCode!=13);" autocomplete="off" value="{{ txt}}">

                                {% endif %}
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator7" style="color:Red;font-size:large;visibility:hidden;">*</span>
                            </td>

                            <td>
                                <!--<input type="submit" name="ctl00$ContentPlaceHolder1$Button1" value="Search" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$Button1&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="ctl00_ContentPlaceHolder1_Button1" class="btn btn-primary">
                                -->
                                <input type="submit" name="ctl00$ContentPlaceHolder1$Button1" value="Search" onclick="searchBytxt()" id="ctl00_ContentPlaceHolder1_Button1" class="sub2button">
                                <input type="hidden" name="ctl00$ContentPlaceHolder1$hfsearch" id="ctl00_ContentPlaceHolder1_hfsearch">
                            </td>

                            <td></td>
                        </tr>

                    </tbody>
                </table>

                <span id="ctl00_ContentPlaceHolder1_lblError" style="color:Red;"></span>


				{% if length  > 0 %}
	                <table class="table table-striped bootstrap-datatable datatable dataTable committee-table"
                           id="ctl00_ContentPlaceHolder1_GridView1" style="border-collapse:collapse;width:98%;margin-top:20px;" cellspacing="0" cellpadding="2" border="0">
		            <tbody id="tdata">

                    <tr>
			            <th scope="col" style="width:1%;" align="left">
                            <input id="ctl00_ContentPlaceHolder1_GridView1_ctl01_cbSelectAll" type="checkbox" name="ctl00$ContentPlaceHolder1$GridView1$ctl01$cbSelectAll" onclick="checkAll(this);">
                        </th>
                        <th scope="col" style="width:10%;" align="left">Username</th>
                        <th scope="col" style="width:10%;" align="left">Name</th>
                        <th scope="col" style="width:10%;" align="left">User type</th>
                        <th scope="col" align="left">Email</th>
                        <th scope="col" style="width:10%;">Edit</th>
                        <th scope="col" style="width:10%;">Account Status</th>
                        <th scope="col" style="width:10%;">Committee</th>
                        <th scope="col" style="width:10%;">Status</th>
                        <th scope="col" style="width:10%;">Regenerate Password</th>
                        <th scope="col" style="width:10%;">Remote Wipe</th>
                    </tr>
                    {% for user in users %}
                    <tr>
			            <td style="width:20px;">
                            <input name="ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1" type="checkbox"
                                   id="ctl00_ContentPlaceHolder1_GridView1_ctl02_Checkbox1" class="" value="{{ user.0 }}">
                        </td>
                        <td style="text-align:left;">
                            <!--<span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lbluserid">haris</span>-->
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lbluserid">{{ user.0 }}</span>
                        </td>
                        <td style="text-align:left;">
                            <!--<span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblename">Haris Shaikh</span>-->
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblename">{{ user.3 }}</span>
                        </td>
                        <td style="text-align:center;">
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblusertype">user</span>
                        </td>
                        <!--<td align="left">haris@mobitrail.com</td>-->
                        <td style="text-align:left;">{{ user.8}}</td>
                        <td align="center">
                            <a data-toggle="modal" onclick="viewEditUser('{{ user.0 }}')" data-target="#editModal"/>
                            <input type="image" src="{{baseURL}}static/images/penicl-01.png" style="width: 45%;margin-top:10px;"
                                   value="Edit"></a>

                        </td>
                        {% if user.25|lower == 'false' %}
                        <td align="center">
                            <input type="image" name="ctl00$ContentPlaceHolder1$GridView1$ctl02$btnlock"
                                   id="ctl00_ContentPlaceHolder1_GridView1_ctl02_btnlock" onclick="changeAccStatus('{{ user.0 }}')"
                                   src="{{baseURL}}static/images/lock1.png" style="width:42px;border-width:0px;">
                        </td>

                        {% else %}
                          <td align="center">
                            <input type="image" name="ctl00$ContentPlaceHolder1$GridView1$ctl02$btnUnlock"
                                   id="ctl00_ContentPlaceHolder1_GridView1_ctl02_btnUnlock" disabled="disabled"
                                   src="{{baseURL}}static/images/unlock2.png" style="width:42px;border-width:0px;">
                        </td>
                        {% endif %}
<!--                        <td align="center">-->
<!--                            <input type="button" class="btn btn-primary" value="Assign" onclick="assign('{{ user.0 }}')">-->
<!--                        </td>-->
                       <td align="center">
                            <input type="button" class="sub2button" value="Assign" data-toggle="modal" data-target="#myModal"
                        onclick="assign('{{ user.0 }}')">
                       </td>

                        {% if user.13|lower == 'false' %}
                        <td align="center">
                            <a href="{{baseURL}}enableUser/{{user.0}}"><input type="submit" value="Enable User" class="sub2button"
                                               onclick="return confirm('Are you sure you want to enable this user?');"></a></td>
                        {% elif user.13|lower == 'true'%}
                         <td align="center">
                            <a href="{{baseURL}}enableUser/{{user.0}}"><input type="submit" value="Disable User" class="sub2button"
                                               onclick="return confirm('Are you sure you want to disable this user?');"></a></td>
                        {% endif %}

                         <td align="center">
                            <a><input type="submit" value="Regenerate" class="sub2button"
                            onclick="regeneratePass('{{user.0}}','{{ user.8}}')"></a>
                        </td>

<!--                        <td align="center">-->
<!--                            <a href="{{baseURL}}regenerateUser/{{user.0}}"><input type="submit" value="Regenerate" class="sub2button"-->
<!--                            onclick="return confirm('Are you sure you want to regenerate password for this user?');"></a>  -->
<!--                        </td>-->

                        <td align="center">
                            <a href="{{baseURL}}wipeData/{{user.0}}"><input type="submit"  value="Wipe Data" class="sub2button"
                           onclick="return confirm('This will disable user and wipe data from user device, Are you sure ?');" ></a>
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                    </table>
                {% else %}
                    <!--<p style="font-size: large;font-weight: bold;margin-left: 36px;color: #b94a48;"> No User Found</p>-->
                <table  class="table table-striped bootstrap-datatable datatable dataTable calender-meetings notify-table tdata"
                            cellspacing = "0" cellpadding = "4" style="font-size:14px;border:1px solid darkgrey;border-left:none;margin:10px;width:98%;" >
                <tbody>
                <tr>
                    <td colspan="12">
                        <div style="text-align:center;color: #b94a48;font-weight: 500">No User Found </div>
                    </td>
                </tr>
               </tbody>
            </table>


                {% endif %}
            </div>
        </div>
    </div>
         </div>

     </div>



   <!-- ++++++++++++++++++++++++++++++++++++++++++++++ Pagination Start ++++++++++++++++++++++++++++++-->

    {% if datalength < 11 %}
<div class="pagination" style="display:none;">
{% else %}
    <div class="pagination" style="padding-left:13px;">
{% endif %}
     <ul class="pagination">
                  <li class="page-item">
                     {% if users.number != 1 %}
                     <a class="page-link" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page=1">First</a>
                     {% endif %}
                  </li>
                  <li class="page-item">
                     {% if users.has_previous %}
                     <a class="page-link" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page={{ users.previous_page_number }}" aria-label="Previous">
                     <span aria-hidden="true">&laquo;</span>
                     </a>
                     {% endif %}
                  </li>
                  {% for num in users.paginator.page_range %}
                  {% if users.number == num %}
                  <li class="page-item "><a class="page-link current" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page={{ num }}">{{ num }}</a></li>
                  {% elif num > users.number|add:-3 and num < users.number|add:3  %}
                  <li class="page-item"><a class="page-link" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page={{ num }}">{{ num }}</a></li>
                  {% endif %}
                  {% endfor %}
                  <li class="page-item">
                     {% if users.has_next %}
                     <a class="page-link" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page={{ users.next_page_number }}" aria-label="Next">
                     <span aria-hidden="true">&raquo;</span>
                     </a>
                     {% endif %}
                  </li>
                  </li>
                  <li class="page-item">
                     {% if users.number != users.paginator.num_pages %}
                     <a class="page-link" href="?commitee={{committe_id}}&usertype={{usertype}}&display={{display}}&txt={{txt}}&page={{ users.paginator.num_pages }}">Last</a>
                     {% endif %}
                  </li>
               </ul>
</div>

    <!-- +++++++++++++++++++++++++++++++++++++++++++ Pagination End ++++++++++++++++++++++++++++++++++-->

<!--               ++++++++++++++++++++++++++++++++++++++++++      Add USer Start ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

     <div id="ctl00_ContentPlaceHolder1_addUser" class="">
    <div class="box span11 topmargin" style="margin-left:15px;margin-top:15px;width:1100px;">
        <div class="box-header" data-original-title="">
            <h2 style="font-family: sans-serif;font-size: 16px;line-height: 16px;font-weight:normal;"><span class="glyphicon glyphicon-edit"></span><span class="break"></span>Add User</h2>
        </div>
        <hr class="hrborder" style="margin:0 20px;">

        <div class="box-content1">
            <div class="table-condensed resize-horizontal">
                <span id="ctl00_ContentPlaceHolder1_lblMessage" style="color:Red;"></span>
                <table style="width: 98%;">
                    <tbody>
                        <tr>

                            <td>Full Name<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtName" type="text" id="ctl00_ContentPlaceHolder1_txtName"
                                       class="adduserblk" onkeydown="return (event.keyCode!=13);">
<!--                            </td>-->
<!--                            <td>-->
                                <span id="adduser_titlevalidator" class="auto-style2" style="color:Red;visibility:hidden;"></span>
<!--                                    *</span>&nbsp;<span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator2" style="color:Red;visibility:hidden;">Only alphabets are allowed</span>-->
                            </td>


                            <td>E-Mail ID<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txt_email" type="text" id="ctl00_ContentPlaceHolder1_txt_email" class="adduserblk">
<!--                            </td>-->
<!--                            <td>-->
                                <span id="adduser_emailvalidator" class="auto-style2" style="color:Red;visibility:hidden;"></span>
<!--                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator6" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;-->
<!--                                <span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator6" style="color:Red;visibility:hidden;">Invalid Email ID</span>-->
                            </td>
                        </tr>

                        <tr>
                            <td>User Name<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtUser" type="text" id="ctl00_ContentPlaceHolder1_txtUser" class="adduserblk"
                                       onkeydown="return (event.keyCode!=13);">
<!--                            </td>-->
<!--                            <td>-->
                                <span id="adduser_usernamevalidator" class="auto-style2" style="color:Red;visibility:hidden;"></span>
<!--                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator1" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;-->
<!--                                <span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator3" style="color:Red;visibility:hidden;">Only Alphanumeric and Underscore are allowed</span>-->
                            </td>
                            <td>Joining Date<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>

                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtDate" type="text" id="ctl00_ContentPlaceHolder1_txtDate"
                                       class="adduserblk" autocomplete="off" onkeydown="return false" onkeypress="javascript: return false;"
                                       onpaste="javascript: return false;">



<!--                            </td>-->
<!--                            <td>-->
                                <span id="adduser_joindatevalidator" class="auto-style2" style="color:Red;visibility:hidden;">*</span>
                            </td>
                        </tr>

                        <tr>

                            <td>Employee ID<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtempid" type="text" id="ctl00_ContentPlaceHolder1_txtempid" class="adduserblk"
                                       onkeydown="return (event.keyCode!=13);">
<!--                            </td>-->
<!--                            <td>-->

                              <span id="adduser_empidvalidator" class="auto-style2" style="color:Red;visibility:hidden;"></span>

<!--                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator4" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;-->
<!--                                <span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator5" style="color:Red;visibility:hidden;">Invalid Employee ID</span>-->
                            </td>
                            <td colspan="3">
<!--                                <span class="checkbox inline"><input id="ctl00_ContentPlaceHolder1_chkcmsFlag" type="checkbox" name="ctl00$ContentPlaceHolder1$chkcmsFlag"><label for="ctl00_ContentPlaceHolder1_chkcmsFlag">For Web CMS</label></span>-->
<!--                                <span id="ctl00_ContentPlaceHolder1_Label4" style="font-size:12px;">(For iPad uncheck this Box)</span>-->

                                <span class="checkbox inline"><input id="ctl00_ContentPlaceHolder1_chkcmsFlag" type="checkbox" style="margin-left:1px;"
                                          name="ctl00$ContentPlaceHolder1$chkcmsFlag"><label for="ctl00_ContentPlaceHolder1_chkcmsFlag" style="margin-left:3px;margin-top:6px;">
                                    For Web CMS<sup style="font-size:12px;">(For iPad uncheck this Box)</sup></label></span>
<!--                                <span id="ctl00_ContentPlaceHolder1_Label4" style="font-size:12px;">(For iPad uncheck this Box)</span>-->
                            </td>

                            <td></td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>Mobile No.<span style="color:red;font-size:larger;">*</span></td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtMobile" class="adduserblk" type="text" maxlength="10"
                                       id="ctl00_ContentPlaceHolder1_txtMobile">
<!--                            </td>-->
<!--                            <td>-->
                                   <span id="adduser_contactvalidator" class="auto-style2" style="color:Red;visibility:hidden;"></span>

<!--                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator3" class="auto-style2" style="color:Red;visibility:hidden;">*</span>-->
<!--                                <span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator1" style="color:Red;visibility:hidden;">Please enter valid mobile number.</span>-->
                            </td>
                        </tr>

                        <tr>
                            <td>Print</td>
                            <td>:</td>
                            <td>
                                <input id="ctl00_ContentPlaceHolder1_printacc" type="checkbox" style="margin:15px;"
                                       name="ctl00$ContentPlaceHolder1$printacc">
                                    [Check to provide print rights]
                            </td>
                            <td>&nbsp;</td>
                        </tr>

                        <tr>
                            <td colspan="6">
                                <input type="submit" name="ctl00$ContentPlaceHolder1$btn_Op" value="Submit"
                                  onclick="addUser()" id="ctl00_ContentPlaceHolder1_btn_Op" class="sub2button">
                            </td>
                        </tr>


                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>
</div>



<!--assign committiee modal-->

<div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content" style="font-family: UbuntuRegular;">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"><span id="usertitle" style="font-size:Large;font-weight:bold;"> </span></h4>
          </div>

          <div class="modal-body">
             <!-- onsubmit="formFunction()"-->
<!--            <form method="POST"  onsubmit="assignCommittee()" id="myForm1" autocomplete="off" class="form-horizontal" role="form">-->
            {% csrf_token %}

            <div style="border: 1px solid #eeeeee;padding:2%;width:100%;">
              <table id="CheckBoxList"  border="0">
                            <tbody>

                                    {% for key,value in committee_list.items %}
                                           <tr style="padding:10px;"><input id="{{value}}" class="committee-blk checkbox-inline" type="checkbox" name="committee" value="{{key}}">
                                          <label class="usercommittee checkbox-inline" for="{{value}}">{{value}}</label></tr>
                                          {% endfor %}

                            </tbody>
            </table>
            </div>

               <div style="display: flex;justify-content: center;marign-top:20px;">
                              <input type="button" onclick="assignCommittee()" name="Button1" value="Submit" id="Button1" class="sub2button"
                              style="margin-top:20px;">
                           </div>
<!--            </form>-->
          </div>
        </div>
      </div>
</div>

<!--++++++++++++++++++++++++++++++++Edit start Modal+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<div id="editModal" class="modal fade" role="dialog" >
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content" style="font-family: UbuntuRegular;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" onclick="location.reload();">&times;</button>
        <h4 class="modal-title">Edit User</h4>
      </div>
      <div class="modal-body">
         <!-- onsubmit="formFunction()"-->
    <form method="POST"  onsubmit="" id="myForm1" autocomplete="off" class="form-horizontal" role="form">
     {% csrf_token %}
      <table class="forms" width="100%">
                        <tbody>
<!--                        <tr>-->
<!--                            <td align="center">&nbsp; &nbsp;</td>-->
<!--                            <td colspan="2" align="center">-->
<!--                                <span id="lblMessage1" style="color:Red;"></span>-->
<!--                            </td>-->
<!--                        </tr>-->
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelF">Full Name<span style="color:red;font-size:medium;">*</span></span>
                            </td>
                            <td>
                                <input  name="txtName" type="text" value="" id="txtEName" class="adduserblk1" >
                                <span id="RequiredFieldValidator11" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator11" style="color:Red;visibility:hidden;">Only Alphabets are allowed</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelU">User Name</span>
                            </td>
                            <td>
                                <input name="txtUser" type="text" value="" maxlength="10" id="txtEUser" disabled="disabled" class="adduserblk1" style="cursor: not-allowed;background-color: #eeeeee;">
                                <span id="RequiredFieldValidator12" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
<!--                                <span id="RegularExpressionValidator12" style="color:Red;visibility:hidden;">Only Alphanumeric and Underscore are allowed</span>-->
                            </td>
                        </tr>

                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelE">Email ID<span style="color:red;font-size:medium;">*</span></span>
                            </td>
                            <td>
                                <input name="txt_email" type="text" value="" id="txtE_email" class="adduserblk1" >
                                <span id="RequiredFieldValidator13" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator13" style="color:Red;visibility:hidden;">Invalid Email ID</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelEmp">Employee ID<span style="color:red;font-size:medium;">*</span></span>
                            </td>
                            <td>
                                <input name="txtempid" type="text" value="" id="txtEempid" class="adduserblk1" onBlur="validateEmpid();">
                                <span id="RequiredFieldValidator14" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator14" style="color:Red;visibility:hidden;">Invalid Email ID</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Mobile No.<span style="color:red;font-size:medium;">*</span>
                            </td>
                            <td>
                                <input name="txtMobile" class="adduserblk1" type="text" value="" maxlength="10" id="txtEMobile" onBlur="validateMobno();">
                                <span id="RequiredFieldValidator15" style="color:Red;font-size:Large;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator15" style="color:Red;visibility:hidden;">Please enter valid mobile number.</span>

                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Joining Date<span style="color:red;font-size:medium;">*</span></td>
                            <td>
                                <input name="txtDate" type="text" value="" id="txtEDate" class="adduserblk1 txtDate" autocomplete="off" onkeydown="return false" onkeypress="javascript: return false;" onpaste="javascript: return false;">

                                <span id="RequiredFieldValidator16" class="auto-style1" style="color:Red;visibility:hidden;">*</span>

                            </td>
                        </tr>
                         <tr>
                            <td>&nbsp;</td>
                            <td>Print</td>
                            <td>
                                <div class="checkbox-inline">
                                <input class="adduserblk1" id="chkprintE" type="checkbox" name="CheckBox1"
                                       style="margin-left:15px;">
                                    <label style="padding-left: 40px;padding-top: 4px;">[Check to provide print rights]</label>
                                </div>
                            </td>
                        </tr>



<!--                        <tr>-->
<!--                            <td>&nbsp;</td>-->
<!--                            <td colspan="2">-->

<!--                            </td>-->
<!--                        </tr>-->
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>

                            <td>

                                <span class="checkbox inline" style="margin-left:30px;"><input id="chkcmsFlagE" type="checkbox" style="margin-left:0px;" name="ctl00$ContentPlaceHolder1$chkcmsFlag"><label for="ctl00_ContentPlaceHolder1_chkcmsFlag" style="margin-left:3px;margin-top:6px;">
                                    For Web CMS</label></span>


<!--                                <span class="checkbox inline"><input id="chkcmsFlagE" type="checkbox" name="chkcmsFlag" class="adduserblk1"-->
<!--                                                                style="margin-left:30px;">For Web CMS</span>-->
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>
                                <span id="Labeli" style="font-size:12px;margin-left:30px;">(Please Note for iPad uncheck this Box)</span>
                            </td>
                        </tr>
                        <tr>
                            <td align="center">&nbsp;</td>
                            <td colspan="2" align="center">
                                <input type="button" name="btn_Op" value="Submit" onclick="updateUser()" id="btn_Op1" class="sub2button">
                            </td>
                        </tr>
                        <tr>
                            <td align="center">&nbsp;</td>
                            <td colspan="2" align="center">


                            </td>
                        </tr>
                        </tbody>
                        </table>
  </form>
</div>
    </div>
  </div>
</div>
<!--++++++++++++++++++++++++++++++++++++++++Edit Modal End+++++++++++++++++++++++++++++++++-->


<!--  ++++++++++++++++++++++++++++++++++++ Add USer End+++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

<script>
function changeAccStatus(userid){
     $.ajax({
        url:'{{baseURL}}changeAccStatus',
        type:'POST',
        data:{
            'userid':userid,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(){
            alert("User has been unlocked!")
            location.reload();
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });
}

function regeneratePass(user,email)
{

    var optn = confirm('Are you sure to Regenerate Password for this E-mail ID : '+email)
    console.log(optn);

    if(optn){
        $.ajax({
            url:'{{baseURL}}regenerateUser',

            type:'POST',
            data:{
                'user':user,
                'email':email,
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
			beforeSend: function(){
                // Show image container
                $("#loader").show();
            },
            success:function(){
                alert("Reset passoword link sent on your email")
                location.reload();
            },
            complete:function(){
				// Hide image container
                $("#loader").hide();
			},
            error:function(xhr,textStatus,thrownError){}
        });
    }

}






function assign(id) {
           // window.open('{{baseURL}}assignCommittee?id=' + id, '', 'width=700,height=400,scrollbars=yes');

            $.ajax({
                    type:'POST',
                    url:'{{baseURL}}manageUser',
                    data:{
                            'id':id,
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                          },
                    success:function(response){
                        console.log(response.assign_committee,response.userid);

                        $('#usertitle').text('Assign Committee to User: '+response.userid)

                         $(".committee-blk").each(function(){
                             $(this).prop("checked",false);
                           });

                        var com_array = []
                              $("input:checkbox[name=committee]").each(function(){
                                 com_array.push($(this).val());
                         });


                         for(var i=0; i<(response.assign_committee).length;i++){
                            assg_com = (response.assign_committee[i])
                            console.log(assg_com,typeof(assg_com))
                                if(com_array.includes(assg_com)){

                                   document.querySelectorAll("input[name=committee][value='"+assg_com+"']")[0].checked=true;
                                }
<!--                                else{-->
<!--                                    document.querySelectorAll("input[name=committee][value='"+assg_com+"']")[0].checked=false;-->
<!--                                }-->

                         }
                         $("#Button1").attr("onclick","assignCommittee('"+response.userid+"')");


                    },
                    complete:function(){
                    },
                    error:function (xhr, textStatus, thrownError){}



    });
        }

 function assignCommittee(user){
 console.log("user--------->"+user);
      var com_array = []
      $("input:checkbox[name=committee]:checked").each(function(){
         com_array.push($(this).val());
      });
      var committiee = com_array.join(',');
      //alert(committiee)

       $.ajax({
        url:'{{baseURL}}assignCommitteeToUser',
        type:'POST',
        data:{
            'committiee':committiee,
            'user':user,

            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(){
            //window.open('{{baseURL}}assignCommittee?id=' + user);
			alert("Committees assigned successfully");
            location.reload();
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });




   }
$(function() {
        now = new Date();
        expiry = new Date(sessionStorage.getItem("exp"));
        console.log("expiry--->"+expiry);
        expiry.setMinutes(expiry.getMinutes() + 5);
        if (now.getTime() > expiry.getTime()) {
                console.log("session cleared");
                 sessionStorage.clear();
        }else{
<!--       console.log("_______session not cleared");-->
<!--         $('#ctl00_ContentPlaceHolder1_ddlCat option[value="'+sessionStorage.getItem("commitee")+'"]').attr("selected", "selected");-->
<!--            $('#ctl00_ContentPlaceHolder1_dropUsertype option[value="'+sessionStorage.getItem("usertype")+'"]').attr("selected", "selected");-->
<!--            $('#ctl00_ContentPlaceHolder1_DropDownList1 option[value="'+sessionStorage.getItem("display")+'"]').attr("selected", "selected");-->
<!--            $('#ctl00_ContentPlaceHolder1_txtEmployee').val(sessionStorage.getItem("txt"));-->
        }

    });

function getCommitee(){
    commitee = document.getElementById('ctl00_ContentPlaceHolder1_ddlCat').value;
    usertype = document.getElementById('ctl00_ContentPlaceHolder1_dropUsertype').value;
    display = document.getElementById('ctl00_ContentPlaceHolder1_DropDownList1').value;
    txt = document.getElementById('ctl00_ContentPlaceHolder1_txtEmployee').value;

    console.log("commitee====>"+commitee+"  | usertype=========>"+usertype+"  | display==========>"+display+"  | txt==========>"+txt);

    sessionStorage.setItem('commitee', commitee);
    sessionStorage.setItem('usertype', usertype);
    sessionStorage.setItem('display', display);
    sessionStorage.setItem('txt', txt);

    $.ajax({
        url:'{{baseURL}}manageUser',
        type:'GET',
        data:{
            'commitee':commitee,
            'usertype':usertype,
            'display':display,
            'txt':txt,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(response){

            //alert(sessionStorage.getItem('commitee'));
           window.location.href = '{{baseURL}}manageUser?commitee='+commitee+'&usertype='+usertype+'&display='+display+'&txt='+txt;
            var timestamp = new Date();
            sessionStorage.setItem("exp",timestamp)
           // $('#tdata').replaceWith($("#tdata",response))
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });
}

</script>


<script>
<!--  changed  -->
function searchBytxt(){
    commitee = document.getElementById('ctl00_ContentPlaceHolder1_ddlCat').value;
    usertype = document.getElementById('ctl00_ContentPlaceHolder1_dropUsertype').value;
    display = document.getElementById('ctl00_ContentPlaceHolder1_DropDownList1').value;
    txt = document.getElementById('ctl00_ContentPlaceHolder1_txtEmployee').value;
    var valid=true;

    console.log("commitee====>"+commitee+"  | usertype=========>"+usertype+"  | display==========>"+display+"  | txt==========>"+txt);

    if (txt == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator7').style.visibility = "visible";
        valid = false;
    }
    if (txt.length > 0){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator7').style.visibility = "hidden";
    }

    if(valid){

        sessionStorage.setItem('commitee', commitee);
        sessionStorage.setItem('usertype', usertype);
        sessionStorage.setItem('display', display);
        sessionStorage.setItem('txt', txt);

        $.ajax({
        url:'{{baseURL}}manageUser',
        type:'GET',
        data:{
            'commitee':commitee,
            'usertype':usertype,
            'display':display,
            'txt':txt,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(response){
           window.location.href = '{{baseURL}}manageUser?commitee='+commitee+'&usertype='+usertype+'&display='+display+'&txt='+txt;

          // $('#tdata').replaceWith($("#tdata",response))
           var timestamp = new Date();
            sessionStorage.setItem("exp",timestamp)
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });

    }

}


function removeUser(){
    var checkboxes = document.getElementsByName('ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1');
    if ($('#tdata :checked').length == 0) {
        alert("Please Select User to Delete.");
    }
    else{
        if ($('#tdata :checked').length == 1) {
            var checkedValue = $('#tdata :checked').val();
            var r = confirm("Are you sure you want to Delete User "+checkedValue+"?");
        }
        else{
            var r = confirm("Are you sure you want to Delete this Record ?");
        }


        if (r == true)
         {
            var selected=[]
            $("input:checkbox[name='ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1']:checked").each(function(){
                    selected.push($(this).val());
            });


                $.ajax({
                type: 'POST',
                url:'{{baseURL}}removeUser',
                data: { 'removeUser':selected,
                        'dataType': 'json',
                        'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success:function(response)
                {
                   alert("User Deleted Successfully. ")
                   location.reload();
                },
                complete:function(){},
                error:function (xhr, textStatus, thrownError){}
              });
            }

    }
}


function addUser(){
    var fname = document.getElementById('ctl00_ContentPlaceHolder1_txtName').value;
    var uname = document.getElementById('ctl00_ContentPlaceHolder1_txtUser').value;
    var empid = document.getElementById('ctl00_ContentPlaceHolder1_txtempid').value;
    var mobno = document.getElementById('ctl00_ContentPlaceHolder1_txtMobile').value;
    var emailid = document.getElementById('ctl00_ContentPlaceHolder1_txt_email').value;
    var jd = document.getElementById('ctl00_ContentPlaceHolder1_txtDate').value;

    var printChk = document.getElementById('ctl00_ContentPlaceHolder1_printacc');
    var print = "";
    if(printChk.checked == true){
        print="1";
        console.log("print checked===>"+print);
    }
    else{
        print = "0";
        console.log("print not checked=====>"+print);
    }

    var cmsChk = document.getElementById('ctl00_ContentPlaceHolder1_chkcmsFlag');
    var cmsflag = "";
    if(cmsChk.checked == true){
        cmsfalg="True";
        console.log("cmsflag checked===>"+cmsflag);
    }
    else{
        cmsflag = "False";
        console.log("cmsflag not checked=====>"+cmsflag);
    }


   // var txtregex = /^[a-zA-Z\' \'\\s.]+$/;
    var txtregex1 = /^[A-Za-z]|[A-Za-z][A-Za-z\s]*[A-Za-z]$/
    var txtregex = /^\w+( \w+)*$/
     var fnameregex = /^[a-zA-Z]+[ a-zA-z]+$/;
    //var emailregex = /^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/ ;
    //email regex pattern
    var emailregex = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/


    var userregex = /^[a-zA-Z0-9_]+$/;
    var empidregex = /^[a-zA-Z0-9]+$/;
    var mobregex=/^[0-9]{10}$/;

    //var validation = false;
    //var isvalid = true;

    var fnameflag , emailflag ,userflag ,empidflag, mobflag, jdflag;

    // validate full name

    if (fname == ""){

        $('#adduser_titlevalidator').text('*');
        document.getElementById('adduser_titlevalidator').style.visibility = "visible";
        //validation = true;
        fnameflag=false;

    }
    else{

        if(fnameregex.test(fname) === false){
            $('#adduser_titlevalidator').text('Only alphabets are allowed');
            document.getElementById('adduser_titlevalidator').style.visibility = "visible";
         //   validation = true;
            fnameflag=false;

        }
        else{
            document.getElementById('adduser_titlevalidator').style.visibility = "hidden";
         //   validation = false;
            fnameflag=true;

        }
    }


    // Validate Email ID
    if (emailid == ""){
        $('#adduser_emailvalidator').text('*');
        document.getElementById('adduser_emailvalidator').style.visibility = "visible";
        //validation = true;
        emailflag=false;
    }
    else{

        if(emailregex.test(emailid) === false){
            $('#adduser_emailvalidator').text('Invalid Email ID');
            document.getElementById('adduser_emailvalidator').style.visibility = "visible";
            //validation = true;
            emailflag=false;
        }
        else{
            document.getElementById('adduser_emailvalidator').style.visibility = "hidden";
            //validation = false;
            emailflag=true;
        }
    }

    // Validate USer Name
    if (uname == ""){
        $('#adduser_usernamevalidator').text('*');
        document.getElementById('adduser_usernamevalidator').style.visibility = "visible";
       // validation = true;
        userflag=false;
    }
    else{
        if(userregex.test(uname) === false){
        $('#adduser_usernamevalidator').text('Only Alphanumeric and Underscore are allowed');
        document.getElementById('adduser_usernamevalidator').style.visibility = "visible";
          //  validation = true;
            userflag=false;
        }
        else{
            document.getElementById('adduser_usernamevalidator').style.visibility = "hidden";
           // validation = false;
            userflag=true;
        }
    }


    // Validate Empid
    if (empid == ""){
        $('#adduser_empidvalidator').text('*');
        document.getElementById('adduser_empidvalidator').style.visibility = "visible";

       // validation = true;
        empidflag=false;
    }
    else{
        if(empidregex.test(empid) === false){
        $('#adduser_empidvalidator').text('Invalid Employee ID');
        document.getElementById('adduser_empidvalidator').style.visibility = "visible";
          //  validation = true;
            empidflag=false;
        }
        else{
            document.getElementById('adduser_empidvalidator').style.visibility = "hidden";
           // validation = false;
            empidflag=true;
        }
    }



    // Validate Mobile Number
    if (mobno == ""){
        $('#adduser_contactvalidator').text('*');
        document.getElementById('adduser_contactvalidator').style.visibility = "visible";
        //validation = true;
        mobflag=false;
    }
    else{
        if(mobregex.test(mobno) === false){
        $('#adduser_contactvalidator').text('Please Enter Valid Mobile Number');
        document.getElementById('adduser_contactvalidator').style.visibility = "visible";
           // validation = true;
            mobflag=false;
        }
        else{
            document.getElementById('adduser_contactvalidator').style.visibility = "hidden";
            //validation = false;
            mobflag=true;
        }
    }


    // VAlidate jd
    if (jd == ""){
        document.getElementById('adduser_joindatevalidator').style.visibility = "visible";
        jdflag=false;
    }
    else{
        document.getElementById('adduser_joindatevalidator').style.visibility = "hidden";
        jdflag=true;
    }

  //if (validation == false){

if(fnameflag && emailflag && userflag && empidflag && mobflag && jdflag){
    $.ajax({
        url:'{{baseURL}}addUser',
        type:'POST',
        data:{
            'fname':fname,
            'uname':uname,
            'emailid':emailid,
            'mobno':mobno,
            'empid':empid,
            'jd':formatDate1(jd),
            'cmsflag':cmsflag,
            'print':print,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(response){


                //alert(response.message);
                if(response.message == 'User added successfully'){
                    alert('User added successfully.')
                    location.reload();
                    //assign(response.uname);
                    //$('#myModal').modal('show');


                }
                else{
                    if(response.message == 'Email Id already exists.')
                        {
                            alert('Email Id already exists.');
                        }
                    else{
                            if(response.message == 'User Name already exists.'){
                                alert('User Name already exists.');
                            }
                    }

                }
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });
  }
 }

 function formatDate1(date) {
 console.log("##"+date);
        var d = new Date(date);

         day=d.getDate()>9?d.getDate():"0"+d.getDate(); // format should be "DD" not "D" e.g 09
         month=(d.getMonth()+1)>9?(d.getMonth()+1):"0"+(d.getMonth()+1);
         year=d.getFullYear();

        var maxDate = year + '/' + month + '/' + day;
        console.log("maxd===>"+maxDate);
        return maxDate;
   }

 $( "#ctl00_ContentPlaceHolder1_txtDate" ).datepicker({
           maxDate: new Date,
        dateFormat: 'dd/mm/yy'

    });

$( "#txtEDate" ).datepicker({
           maxDate: new Date,
        dateFormat: 'dd/mm/yy'

    });



function viewEditUser(userid){
    console.log(userid);
    var chkprint = document.getElementById("chkprintE");
   var cmsflag = document.getElementById("chkcmsFlagE");
    $.ajax({
        type:'POST',
        url:'{{baseURL}}viewUser',
        data:{
                'userid':userid,

                'csrfmiddlewaretoken': '{{ csrf_token }}'
              },
        success:function(response){
            var o=JSON.parse(response);
            $('#txtEName').val(o.ename);
            $('#txtEUser').val(o.userid);
            $('#txtE_email').val(o.email);
            $('#txtEempid').val(o.empid);
            $('#txtEMobile').val(o.mobile);
            $('#txtEDate').val(formatDate(o.join_dt));
            if(o.printr == '1'){
                chkprint.checked = true;
            }else{
                chkprint.checked = false;
            }

            if(o.cmsflag == 'True'){
                cmsflag.checked = true;
            }else{
                cmsflag.checked = false;
            }

        },
        complete:function(){
        },
        error:function (xhr, textStatus, thrownError){}



    });
}

function formatDate(date) {
    var d = new Date(date);

         day=d.getDate()>9?d.getDate():"0"+d.getDate(); // format should be "DD" not "D" e.g 09
         month=(d.getMonth()+1)>9?(d.getMonth()+1):"0"+(d.getMonth()+1);
         year=d.getFullYear();

        var maxDate =  month + '/' + day + '/' + year;
        console.log("d===>"+maxDate);
        return maxDate;
}


function formatUpdateDate(date) {
       var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2)
        month = '0' + month;
    if (day.length < 2)
        day = '0' + day;
	console.log("d---->"+[year, month, day].join('-'));
    return [year, month, day].join('-');

}

function updateUser(){
    var fname = document.getElementById('txtEName').value;
    var uname = document.getElementById('txtEUser').value;
    var empid = document.getElementById('txtEempid').value;
    var mobno = document.getElementById('txtEMobile').value;
    var emailid = document.getElementById('txtE_email').value;
    var jd = document.getElementById('txtEDate').value;

    var printChk = document.getElementById('chkprintE');
    var print = "";

    if(printChk.checked == true){

        print="1";
        console.log("print checked===>"+print);
    }
    else{

        print = "0";
        console.log("print not checked=====>"+print);
    }

    var cmsChk = document.getElementById('chkcmsFlagE');
    var cmsflag = "";
    if(cmsChk.checked == true){
        cmsflag="True";
        console.log("cmsflag checked===>"+cmsflag);
    }
    else{
        cmsflag = "False";
        console.log("cmsflag not checked=====>"+cmsflag);
    }


   // var txtregex = /^[a-zA-Z\' \'\\s.]+$/;
    var txtregex = /^\w+( \w+)*$/
    var txtregex1 = /^[A-Za-z]|[A-Za-z][A-Za-z\s]*[A-Za-z]$/
    var emailregex = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
    var fnameregex = /^[a-zA-Z]+[ a-zA-z]+$/;
    var userregex = /^[a-zA-Z0-9_]+$/;
    var empidregex = /^[a-zA-Z0-9]+$/;
    var mobregex=/^[0-9]{10}$/;

    var validation = true;
    var fnameflag , emailflag ,userflag ,empidflag, mobflag, jdflag;

    // validate full name
    if (fname == ""){
        document.getElementById('RequiredFieldValidator11').style.visibility = "visible";
        fnameflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator11').style.visibility = "hidden";
        console.log("test ans-->"+fname+"--->"+txtregex1.test(fname))
        if(fnameregex.test(fname) === false){
            document.getElementById('RegularExpressionValidator11').style.visibility = "visible";
            fnameflag = false;
        }
        else{
            document.getElementById('RegularExpressionValidator11').style.visibility = "hidden";
            fnameflag = true;
        }
    }


    // Validate Email ID
    if (emailid == ""){
        document.getElementById('RequiredFieldValidator13').style.visibility = "visible";
        emailflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator13').style.visibility = "hidden";
        if(emailregex.test(emailid) === false){
            document.getElementById('RegularExpressionValidator13').style.visibility = "visible";
            emailflag = false;
        }
        else{
            document.getElementById('RegularExpressionValidator13').style.visibility = "hidden";
            emailflag = true;
        }
    }

    // Validate USer Name
    if (uname == ""){
        document.getElementById('RequiredFieldValidator12').style.visibility = "visible";
        userflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator12').style.visibility = "hidden";
        if(userregex.test(uname) === false){
            document.getElementById('RequiredFieldValidator12').style.visibility = "visible";
            userflag = false;
        }
        else{
            document.getElementById('RequiredFieldValidator12').style.visibility = "hidden";
            userflag = true;
        }
    }


    // Validate Empid
    if (empid == ""){
        document.getElementById('RequiredFieldValidator14').style.visibility = "visible";
        empidflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator14').style.visibility = "hidden";

        if(empidregex.test(empid) === false){
        $('#RegularExpressionValidator14').text('Invalid Employee ID');
        document.getElementById('RegularExpressionValidator14').style.visibility = "visible";
            empidflag=false;
        }
        else{
            document.getElementById('RegularExpressionValidator14').style.visibility = "hidden";
            empidflag=true;
        }
    }



    // Validate Mobile Number
    if (mobno == ""){
        document.getElementById('RequiredFieldValidator15').style.visibility = "visible";
        mobflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator15').style.visibility = "hidden";
        if(mobregex.test(mobno) === false){
            document.getElementById('RegularExpressionValidator15').style.visibility = "visible";
            mobflag = false;
        }
        else{
            document.getElementById('RegularExpressionValidator15').style.visibility = "hidden";
            mobflag = true;
        }
    }


    // VAlidate jd
    if (jd == ""){
        document.getElementById('RequiredFieldValidator16').style.visibility = "visible";
        jdflag = false;
    }
    else{
        document.getElementById('RequiredFieldValidator16').style.visibility = "hidden";
        jdflag = true;
    }
    console.log(fnameflag+"||"+emailflag+"||"+empidflag+"||"+userflag+"||"+mobflag+"||"+jdflag+"||")
    if (fnameflag && emailflag && userflag && empidflag && mobflag && jdflag){
        $.ajax({
                    url:'{{baseURL}}updateUser',
                    type:'POST',
                    data:{
                    'fname':fname,
                    'uname':uname,
                    'emailid':emailid,
                    'mobno':mobno,
                    'empid':empid,
                    'jd':formatUpdateDate(jd),
                    'cmsflag':cmsflag,
                    'print':print,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success:function(response){
                        alert("User Updated Successfully .");
                        location.reload();

                    },
                    complete:function(){},
                    error:function(xhr,textStatus,thrownError){}
                });
    }
}

// new added
 function checkAll(ele) {
     var checkboxes = document.getElementsByName('ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1');
     if (ele.checked) {
         for (var i = 0; i < checkboxes.length; i++) {
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = true;
             }
         }
     } else {
         for (var i = 0; i < checkboxes.length; i++) {
             console.log(i)
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = false;
             }
         }
     }
 }

</script>




</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  