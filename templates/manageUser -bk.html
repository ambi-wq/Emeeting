{% include "header.html" %}
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>eMeeting</title>-->
<!--     {% load static %}-->

<!--    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" />-->
<!--   &lt;!&ndash; <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css" media="all" >&ndash;&gt;-->
<!--    <link rel="stylesheet" href="/static/css/bootstrap.css"/>-->
<!--    <link rel="stylesheet" href="/static/css/bootstrap-responsive.css"/>-->
<!--     <link rel="stylesheet" href="/static/css/style.css"/>-->
<!--    <link rel="stylesheet" href="/static/css/login.css"/>-->
<!--    &lt;!&ndash;<link rel="stylesheet" href="/static/css/style-responsive.css"/>&ndash;&gt;-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->

<!--    &lt;!&ndash;<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>&ndash;&gt;-->
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->

<!--    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->

<!--    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>-->
<!--    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>-->
<!--</head>-->
<!--<style>-->



<!--</style>-->
<!--<script type="text/javascript">-->
<!--function getHeight() {-->

<!--            var height = document.body.scrollHeight;-->
<!--            console.log("height===>"+height);-->
<!--            var content = $('#content').css("min-height", height);-->
<!--        }-->
<!--    </script>-->
<!--<body onload="getHeight()">-->
<!--&lt;!&ndash; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++header start+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->
<!--<div class="navbar">-->
<!--            <div class="navbar">-->
<!--                <div class="container-fluid" style="padding-left: 0px !important; ">-->


<!--&lt;!&ndash;                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                        <span class="icon-bar"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                    </a>&ndash;&gt;-->
<!--                    <a class="brand" href="#"><span>-->
<!--                        <span style="color:#569AEB;font-size:XX-Large;">eMeeting</span>-->
<!--                        </span></a>-->

<!--                    &lt;!&ndash; start: Header Menu &ndash;&gt;-->
<!--                    <div class="nav-no-collapse header-nav">-->
<!--                        <ul class="nav pull-right">-->
<!--                            <li>-->
<!--                                <a id="ctl00_LinkButton2" class="btn" href=""> Change password</a></li>-->
<!--                            <li class="dropdown hidden-phone"></li>-->
<!--                            <li>-->
<!--                                <a id="ctl00_LinkButton1" class="btn dropdown-toggle" href=""><i class="icon-off"></i>  Log Out</a></li>-->
<!--                        </ul>-->
<!--                    </div>-->



<!--                    &lt;!&ndash; end: Header Menu &ndash;&gt;-->

<!--                </div>-->
<!--            </div>-->
<!--            <div class="container" style="text-align: right; background: #569aeb;color: #fff;padding:0.5%;width:100%;">-->
<!--                <span id="ctl00_lblLogin" style="font-weight:bold;"> Last Login :- Administrator 2020-10-28  10:07AM</span>-->
<!--            </div>-->
<!--        </div>-->





<!--<div class="row" style="height:100vh;margin-top:0px; margin-right: 0px; margin-left: 0px;float:left;">-->
<!--<div id="sidebar1" class="sidenav" style="height:100vh!important;overflow-y:auto;">-->
<!--                &lt;!&ndash; start: Main Menu &ndash;&gt;-->
<!--&lt;!&ndash;                <div id="sidebar-left" class="span2">&ndash;&gt;-->
<!--                    <div class="nav-collapse sidebar-nav" >-->
<!--                        <ul class="nav nav-tabs nav-stacked main-menu" style="height: 100vh;width: 210px;border-right: 2px solid #7b7b7b91;background:#fff;">-->
<!--                            <li id="ctl00_m2" class="none"><a href="{{baseURL}}manageMeeting"><span class="hidden-tablet">Meeting</span></a></li>-->
<!--                            <li id="ctl00_m1" class="none"><a href="{{baseURL}}manageUser"><span class="hidden-tablet">User Management</span></a></li>-->
<!--                            <li id="ctl00_m3" class="none"><a href="{{baseURL}}manageCommittee"><span class="hidden-tablet">Committee</span></a></li>-->
<!--                            <li id="ctl00_m4" class="none"><a href="{{baseURL}}manageActivityLogs"><span class="hidden-tablet">Activity Logs</span></a></li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--                &lt;!&ndash; end: Main Menu &ndash;&gt;-->
<!--&lt;!&ndash;                <div style="min-height: 100vh;"></div>&ndash;&gt;-->

<!--            </div>-->
<!--</div>-->

<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++  header end +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
{% if messages %}
	{% for message in messages %}
	   <script>alert("{{ message }}")</script>
	{% endfor %}
{% endif %}


 <script>
    {% if message %}
      alert("{{ message }}")
    {% endif %}
</script>




    <div id="content_manageuser" style="min-height: 792px;">
    <div class="sortable ui-sortable">
    <div class="box span11 topmargin" style="margin-left:15px;width:1100px;margin-top:0;">
    <div class="box-header">
        <div style="width: 68%; float:left;">
            <h2 style="font-size: large;"><i class="fa fa-tasks"></i><span class="break"></span>Manage User</h2>
        </div>
        <div style="width: 14%; float: left;cursor:pointer;">
            <input type="submit"  name="ctl00$ContentPlaceHolder1$Button2" value="Remove User"
                   onclick="removeUser()" id="ctl00_ContentPlaceHolder1_Button2" class="removebutton" style="margin: 4px 2px;">
        </div>
        <div style="width: 14%; float: left">
            <input type="submit" name="ctl00$ContentPlaceHolder1$ExpoCSV" value="Download CSV Report"
                   id="ctl00_ContentPlaceHolder1_ExpoCSV" class="sub2button"
                   onclick="location.href='{{baseURL}}downloadUsers';">
        </div>
    </div>
    <hr class="hrborder">

    <div style="display: block;margin-left: 6px;" class="box-content">
        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
            <div class="row-fluid">

                <table style="width:100%;">
                    <tbody>

                        <tr>
                            <td>&nbsp;</td>
                            <td></td>
                            <td>&nbsp;</td>
                            <td>
                               <!--<select name="ctl00$ContentPlaceHolder1$ddlCat" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <option selected="selected" value="0">Select Committee</option>
                                    <option value="1">Board Committee</option>
                                    <option value="2">Audit Committee</option>
                                    <option value="3">HR Committee</option>
                                </select>-->
                                <select name="ctl00$ContentPlaceHolder1$ddlCat" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <option selected="selected" value="0">Select Committee</option>
                                    {% for committee in committee_array %}
                                            <option value="{{ committee.fid }}">{{ committee.fname }}</option>
                                    {% endfor %}
                                </select>

                                <!--<select name="ctl00$ContentPlaceHolder1$ddlCat" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_ddlCat" class="input-medium">
                                    <option selected="selected" value="{{baseURL}}manageUser?f=All">Select Committee</option>
                                    <option value="{{baseURL}}manageUser?f=1">Board Committee</option>
                                    <option value="{{baseURL}}manageUser?f=2">Audit Committee</option>
                                    <option value="{{baseURL}}manageUser?f=3">HR Committee</option>
                                </select>-->
                            </td>

                            <td>
                                <select name="ctl00$ContentPlaceHolder1$dropUsertype" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_dropUsertype" class="input-medium">
                                    <option selected="selected" value="0">All user type</option>
                                    <option value="1">CMS user</option>
                                    <option value="2">iPad user</option>

                                </select>
                                <!--<select name="ctl00$ContentPlaceHolder1$dropUsertype" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_dropUsertype" class="input-medium">
                                    <option selected="selected" value="{{baseURL}}manageUser?f=All">All user type</option>
                                    <option value="{{baseURL}}manageUser?u=1">CMS user</option>
                                    <option value="{{baseURL}}manageUser?u=2">iPad user</option>

                                </select>-->
                            </td>


                            <td>Display</td>
                            <td>:</td>
                            <td>
                                <select name="ctl00$ContentPlaceHolder1$DropDownList1" onchange="getCommitee()" id="ctl00_ContentPlaceHolder1_DropDownList1" class="input-mini">
                                    <option selected="selected" value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="30">30</option>
                                    <option value="40">40</option>
                                    <option value="50">50</option>
                                </select>
                                <!--<select name="ctl00$ContentPlaceHolder1$DropDownList1" onchange="location = this.value;" id="ctl00_ContentPlaceHolder1_DropDownList1" class="input-mini">
                                    <option selected="selected" value="{{baseURL}}manageUser?d=10">10</option>
                                    <option value="{{baseURL}}manageUser?d=20">20</option>
                                    <option value="{{baseURL}}manageUser?d=30">30</option>
                                    <option value="{{baseURL}}manageUser?d=40">40</option>
                                    <option value="{{baseURL}}manageUser?d=50">50</option>
                                </select>-->
                                Records</td>


                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtEmployee" type="text" id="ctl00_ContentPlaceHolder1_txtEmployee" class="input-medium" placeholder="User ID/Email/Name" onkeydown="return (event.keyCode!=13);" autocomplete="off">
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator7" style="color:Red;font-size:large;visibility:hidden;">*</span>
                            </td>

                            <td>
                                <!--<input type="submit" name="ctl00$ContentPlaceHolder1$Button1" value="Search" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$Button1&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="ctl00_ContentPlaceHolder1_Button1" class="sub2button">
                                -->
                                <input type="submit" name="ctl00$ContentPlaceHolder1$Button1" value="Search" onclick="getCommitee()" id="ctl00_ContentPlaceHolder1_Button1" class="sub2button">
                                <input type="hidden" name="ctl00$ContentPlaceHolder1$hfsearch" id="ctl00_ContentPlaceHolder1_hfsearch">
                            </td>

                            <td></td>
                        </tr>

                    </tbody>
                </table>

                <span id="ctl00_ContentPlaceHolder1_lblError" style="color:Red;"></span>

                <div>
	                <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable" id="ctl00_ContentPlaceHolder1_GridView1" style="border-collapse:collapse;width:98%" cellspacing="0" cellpadding="2" border="0">
		            <tbody id="tdata">
                    <tr>
			            <th scope="col" style="width:1%;" align="left">
                            <input id="ctl00_ContentPlaceHolder1_GridView1_ctl01_cbSelectAll" type="checkbox" name="ctl00$ContentPlaceHolder1$GridView1$ctl01$cbSelectAll" onclick="selectAll(this);">
                        </th>
                        <th scope="col" style="width:10%;" align="left">Username</th>
                        <th scope="col" style="width:10%;" align="left">Name</th>
                        <th scope="col" style="width:10%;" align="left">User type</th>
                        <th scope="col" align="left">Email</th>
                        <th scope="col" style="width:10%;">Edit</th>
                        <th scope="col" style="width:10%;">Account Status</th>
                        <th scope="col" style="width:10%;">Committee</th>
                        <th scope="col" style="width:10%;">Status</th>
                        <th scope="col" style="width:10%;">Regenerate Password</th>
                        <th scope="col" style="width:10%;">Remote Wipe</th>
                    </tr>
                    {% for user in users %}
                    <tr>
			            <td style="width:20px;">
                            <input name="ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1" type="checkbox"
                                   id="ctl00_ContentPlaceHolder1_GridView1_ctl02_Checkbox1" class="checkbox" value="{{ user.0 }}">
                        </td>
                        <td align="left">
                            <!--<span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lbluserid">haris</span>-->
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lbluserid">{{ user.0 }}</span>
                        </td>
                        <td align="left">
                            <!--<span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblename">Haris Shaikh</span>-->
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblename">{{ user.3 }}</span>
                        </td>
                        <td align="left">
                            <span id="ctl00_ContentPlaceHolder1_GridView1_ctl02_lblusertype">user</span>
                        </td>
                        <!--<td align="left">haris@mobitrail.com</td>-->
                        <td align="left">{{ user.8}}</td>
                        <td align="center">
                            <a data-toggle="modal" onclick="viewEditUser('{{ user.0 }}')" data-target="#editModal"/>
                            <input type="image" src="{{baseURL}}static/images/penicl-01.png" style="width: 32%;margin-top:10px;"
                                   value="Edit"></a>

                        </td>
                        <td align="center">
                            <input type="image" name="ctl00$ContentPlaceHolder1$GridView1$ctl02$btnUnlock"
                                   id="ctl00_ContentPlaceHolder1_GridView1_ctl02_btnUnlock" disabled="disabled"
                                   src="{{baseURL}}static/images/unlock2.png" style="width:42px;border-width:0px;">
                        </td>
<!--                        <td align="center">-->
<!--                            <input type="button" class="sub2button" value="Assign" onclick="assign('{{ user.0 }}')">-->
<!--                        </td>-->
                       <td align="center">
                            <input type="button" class="sub2button" value="Assign" data-toggle="modal" data-target="#myModal"
                        onclick="assign('{{ user.0 }}')">
                       </td>

                        {% if user.13|lower == 'false' %}
                        <td align="center">
                            <a href="{{baseURL}}enableUser/{{user.0}}"><input type="submit" value="Enable User" class="sub2button"
                                               onclick="return confirm('Are you sure you want to enable this user?');"></a></td>
                        {% elif user.13|lower == 'true'%}
                         <td align="center">
                            <a href="{{baseURL}}enableUser/{{user.0}}"><input type="submit" value="Disable User" class="sub2button"
                                               onclick="return confirm('Are you sure you want to disable this user?');"></a></td>
                        {% endif %}
                        <td align="center">
                            <a href="{{baseURL}}regenerateUser/{{user.0}}"><input type="submit" value="Regenerate" class="sub2button"
                            onclick="return confirm('Are you sure you want to regenerate password for this user?');"></a>
                        </td>

                        <td align="center">
                            <a href="{{baseURL}}wipeData/{{user.0}}"><input type="submit"  value="Wipe Data" class="sub2button"
                           onclick="return confirm('This will disable user and wipe data from user device, Are you sure ?');" ></a>
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


<!--assign committiee modal-->

<div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content" style="font-family: UbuntuRegular;">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
<!--            <h4 class="modal-title">Edit System</h4>-->
          </div>

          <div class="modal-body">
             <!-- onsubmit="formFunction()"-->
<!--            <form method="POST"  onsubmit="assignCommittee()" id="myForm1" autocomplete="off" class="form-horizontal" role="form">-->
            {% csrf_token %}
                <table align="center" style="z-index: 0;">
                    <tbody>
                        <tr>
                           <td>&nbsp;
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <span id="usertitle" style="font-size:Large;font-weight:bold;"> </span>
                           </td>
                        </tr>
                        <tr>
                           <td>&nbsp;
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <div style="border: 1px solid #eeeeee;padding:2%">
                                 <table id="Repeater1_ctl00_CheckBoxList1" border="0">
                                    <tbody>
                                       <tr>
                                          {% for key,value in committee_list.items %}
<!--                                          {% if key|stringformat:"i"  in assign_com %}-->
<!--                                          <td><input id="{{value}}" class="committee-blk" type="checkbox" name="committee" value="{{key}}" checked><label for="{{value}}">{{value}}</label></td>-->
<!--                                          {% else %}-->
                                           <td><input id="{{value}}" class="committee-blk" type="checkbox" name="committee" value="{{key}}"><label for="{{value}}">{{value}}</label></td>
<!--                                          {% endif %}-->
                                          {% endfor %}
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                           </td>
                        </tr>
                        <tr>
                           <td>&nbsp;
                           </td>
                        </tr>
                        <tr>
                            <td style="display: flex;justify-content: center;">
                              <input type="button" onclick="assignCommittee()" name="Button1" value="Submit" id="Button1" class="sub2button" >
                           </td>
                        </tr>
                    </tbody>
                </table>

<!--            </form>-->
          </div>
        </div>
      </div>
</div>

<!--++++++++++++++++++++++++++++++++Edit start Modal+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<div id="editModal" class="modal fade" role="dialog" >
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content" style="font-family: UbuntuRegular;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Edit User</h4>
      </div>
      <div class="modal-body">
         <!-- onsubmit="formFunction()"-->
    <form method="POST"  onsubmit="" id="myForm1" autocomplete="off" class="form-horizontal" role="form">
     {% csrf_token %}
      <table class="forms" width="100%">
                        <tbody>
                        <tr>
                            <td align="center">&nbsp; &nbsp;</td>
                            <td colspan="2" align="center">
                                <span id="lblMessage1" style="color:Red;"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelF">Full Name*</span>
                            </td>
                            <td>
                                <input name="txtName" type="text" value="" id="txtEName" class="input-large" onBlur="validateFname();">
                                <span id="RequiredFieldValidator11" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator11" style="color:Red;visibility:hidden;">Only Alphabets and space is allowed</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelU">User Name</span>
                            </td>
                            <td>
                                <input name="txtUser" type="text" value="" maxlength="10" id="txtEUser" disabled="disabled" class="input-large">
                                <span id="RequiredFieldValidator12" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator12" style="color:Red;visibility:hidden;">Only Alphanumeric and Underscore are allowed</span>
                            </td>
                        </tr>

                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelE">Email ID*</span>
                            </td>
                            <td>
                                <input name="txt_email" type="text" value="" id="txtE_email" class="input-large" onBlur="validateEmail();">
                                <span id="RequiredFieldValidator13" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                                <span id="RegularExpressionValidator13" style="color:Red;visibility:hidden;">Invalid Email ID</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <span id="LabelEmp" class="input-large">Employee ID*</span>
                            </td>
                            <td>
                                <input name="txtempid" type="text" value="" id="txtEempid" class="input-large" onBlur="validateEmpid();">
                                <span id="RequiredFieldValidator14" class="auto-style1" style="color:Red;visibility:hidden;">*</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Mobile No.
                            </td>
                            <td>
                                <input name="txtMobile" class="input-large" type="text" value="" maxlength="10" id="txtEMobile" onBlur="validateMobno();">
                                <span id="RegularExpressionValidator15" style="color:Red;visibility:hidden;">Please enter valid mobile number.</span>
                                <span id="RequiredFieldValidator15" style="color:Red;font-size:Large;visibility:hidden;">*</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Joining Date</td>
                            <td>
                                <input name="txtDate" type="text" value="" id="txtEDate" class="input-large txtDate" autocomplete="off" onkeydown="return false" onkeypress="javascript: return false;" onpaste="javascript: return false;">

                                <span id="RequiredFieldValidator16" class="auto-style1" style="color:Red;visibility:hidden;">*</span>

                            </td>
                        </tr>
                         <tr>
                            <td>&nbsp;</td>
                            <td>Print</td>
                            <td>
                                <input id="chkprintE" type="checkbox" name="CheckBox1"> &nbsp;&nbsp;[Check to provide print rights]

                            </td>
                        </tr>



                        <tr>
                            <td>&nbsp;</td>
                            <td colspan="2">

                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>
                                <span class="checkbox inline"><input id="chkcmsFlagE" type="checkbox" name="chkcmsFlag"></span>
                                <span>For Web CMS</span>
                            </td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>
                                <span id="Labeli" style="font-size:12px;">(Please Note for iPad uncheck this Box)</span>
                            </td>
                        </tr>
                        <tr>
                            <td align="center">&nbsp;</td>
                            <td colspan="2" align="center">
                                <input type="submit" name="btn_Op" value="Submit" onclick="updateUser()" id="btn_Op1" class="sub2button">
                            </td>
                        </tr>
                        <tr>
                            <td align="center">&nbsp;</td>
                            <td colspan="2" align="center">


                            </td>
                        </tr>
                        </tbody>
                        </table>
  </form>
</div>
    </div>
  </div>
</div>
<!--++++++++++++++++++++++++++++++++++++++++Edit Modal End+++++++++++++++++++++++++++++++++-->




</div>



<!--               ++++++++++++++++++++++++++++++++++++++++++      Add USer Start ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

<div id="ctl00_ContentPlaceHolder1_addUser" class="">
    <div class="box span11 topmargin" style="margin-left:15px;width:1100px;">
        <div class="box-header" data-original-title="">
            <h2><i class="fa fa-pencil-square-o"></i><span class="break"></span>Add User</h2>
        </div>
        <hr class="hrborder">

        <div class="box-content1">
            <div class="table-condensed resize-horizontal">
                <span id="ctl00_ContentPlaceHolder1_lblMessage" style="color:Red;"></span>
                <table style="width: 100%;">
                    <tbody>
                        <tr>
                            <td>Full Name*</td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtName" type="text" id="ctl00_ContentPlaceHolder1_txtName" class="input-large" onkeydown="return (event.keyCode!=13);">
                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator5" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;<span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator2" style="color:Red;visibility:hidden;">Only alphabets are allowed</span>
                            </td>
                            <td>E-Mail ID*</td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txt_email" type="text" id="ctl00_ContentPlaceHolder1_txt_email" class="input-large">
                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator6" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;<span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator6" style="color:Red;visibility:hidden;">Invalid Email ID</span>
                            </td>
                        </tr>

                        <tr>
                            <td>User Name*</td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtUser" type="text" id="ctl00_ContentPlaceHolder1_txtUser" class="input-large" onkeydown="return (event.keyCode!=13);">
                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator1" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;<span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator3" style="color:Red;visibility:hidden;">Only Alphanumeric and Underscore are allowed</span>
                            </td>
                            <td>Joining Date*</td>
                            <td>:</td>

                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtDate" type="text" id="ctl00_ContentPlaceHolder1_txtDate" class="input-small " autocomplete="off" onkeydown="return false" onkeypress="javascript: return false;" onpaste="javascript: return false;">



                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator2" class="auto-style2" style="color:Red;visibility:hidden;">*</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Employee ID*</td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtempid" type="text" id="ctl00_ContentPlaceHolder1_txtempid" class="input-large " onkeydown="return (event.keyCode!=13);">
                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator4" class="auto-style2" style="color:Red;visibility:hidden;">*</span>&nbsp;<span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator5" style="color:Red;visibility:hidden;">Invalid Employee ID</span>
                            </td>
                            <td colspan="3">
<!--                                <span class="checkbox inline"><input id="ctl00_ContentPlaceHolder1_chkcmsFlag" type="checkbox" name="ctl00$ContentPlaceHolder1$chkcmsFlag"><label for="ctl00_ContentPlaceHolder1_chkcmsFlag">For Web CMS</label></span>-->
<!--                                <span id="ctl00_ContentPlaceHolder1_Label4" style="font-size:12px;">(For iPad uncheck this Box)</span>-->

                                <span class="checkbox inline"><input id="ctl00_ContentPlaceHolder1_chkcmsFlag" type="checkbox" style="margin-left:1px;"
                                          name="ctl00$ContentPlaceHolder1$chkcmsFlag"><label for="ctl00_ContentPlaceHolder1_chkcmsFlag" style="margin-left:2px;">
                                    For Web CMS<sup style="font-size:12px;">(For iPad uncheck this Box)</sup></label></span>
<!--                                <span id="ctl00_ContentPlaceHolder1_Label4" style="font-size:12px;">(For iPad uncheck this Box)</span>-->
                            </td>

                            <td></td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>Mobile No.</td>
                            <td>:</td>
                            <td>
                                <input name="ctl00$ContentPlaceHolder1$txtMobile" class="input-large" type="text" maxlength="10" id="ctl00_ContentPlaceHolder1_txtMobile">
                            </td>
                            <td>
                                <span id="ctl00_ContentPlaceHolder1_RequiredFieldValidator3" class="auto-style2" style="color:Red;visibility:hidden;">*</span>
                                <span id="ctl00_ContentPlaceHolder1_RegularExpressionValidator1" style="color:Red;visibility:hidden;">Please enter valid mobile number.</span>
                            </td>
                        </tr>

                        <tr>
                            <td>Print</td>
                            <td>:</td>
                            <td>
                                <input id="ctl00_ContentPlaceHolder1_printacc" type="checkbox" style="margin:15px;"
                                       name="ctl00$ContentPlaceHolder1$printacc">
                                    [Check to provide print rights]
                            </td>
                            <td>&nbsp;</td>
                        </tr>

                        <tr>
                            <td colspan="6">
                                <input type="submit" name="ctl00$ContentPlaceHolder1$btn_Op" value="Submit"
                                  onclick="addUser()" id="ctl00_ContentPlaceHolder1_btn_Op" class="sub2button">
                            </td>
                        </tr>


                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>





</div>
</div>


<!--  ++++++++++++++++++++++++++++++++++++ Add USer End+++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

<script>
function assign(id) {
           // window.open('{{baseURL}}assignCommittee?id=' + id, '', 'width=700,height=400,scrollbars=yes');

            $.ajax({
                    type:'POST',
                    url:'{{baseURL}}manageUser',
                    data:{
                            'id':id,
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                          },
                    success:function(response){
                        console.log(response.assign_committee,response.userid);

                        $('#usertitle').text('Assign Committee to User: '+response.userid)

                         $(".committee-blk").each(function(){
                             $(this).prop("checked",false);
                           });

                        var com_array = []
                              $("input:checkbox[name=committee]").each(function(){
                                 com_array.push($(this).val());
                         });


                         for(var i=0; i<(response.assign_committee).length;i++){
                            assg_com = (response.assign_committee[i])
                            console.log(assg_com,typeof(assg_com))
                                if(com_array.includes(assg_com)){

                                   document.querySelectorAll("input[name=committee][value='"+assg_com+"']")[0].checked=true;
                                }
                                else{
                                    document.querySelectorAll("input[name=committee][value='"+assg_com+"']")[0].checked=false;
                                }

                         }
                         $("#Button1").attr("onclick","assignCommittee('"+response.userid+"')");


                    },
                    complete:function(){
                    },
                    error:function (xhr, textStatus, thrownError){}



    });
        }

 function assignCommittee(user){
      var com_array = []
      $("input:checkbox[name=committee]:checked").each(function(){
         com_array.push($(this).val());
      });
      var committiee = com_array.join(',');
      //alert(committiee)

       $.ajax({
        url:'{{baseURL}}assignCommitteeToUser',
        type:'POST',
        data:{
            'committiee':committiee,
            'user':user,

            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(){
            //window.open('{{baseURL}}assignCommittee?id=' + user);
            location.reload();
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });




   }
function getCommitee(){
    commitee = document.getElementById('ctl00_ContentPlaceHolder1_ddlCat').value;
    usertype = document.getElementById('ctl00_ContentPlaceHolder1_dropUsertype').value;
    display = document.getElementById('ctl00_ContentPlaceHolder1_DropDownList1').value;
    txt = document.getElementById('ctl00_ContentPlaceHolder1_txtEmployee').value;

    console.log("commitee====>"+commitee+"  | usertype=========>"+usertype+"  | display==========>"+display+"  | txt==========>"+txt);


    $.ajax({
        url:'{{baseURL}}manageUser',
        type:'GET',
        data:{
            'commitee':commitee,
            'usertype':usertype,
            'display':display,
            'txt':txt,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(response){

            $('#tdata').replaceWith($("#tdata",response))
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });
}

</script>


<script>
function searchBytxt(){
    commitee = document.getElementById('ctl00_ContentPlaceHolder1_ddlCat').value;
    usertype = document.getElementById('ctl00_ContentPlaceHolder1_dropUsertype').value;
    display = document.getElementById('ctl00_ContentPlaceHolder1_DropDownList1').value;

    console.log("commitee====>"+commitee+"  | usertype=========>"+usertype+"  | display==========>"+display);
    txt = document.getElementById('ctl00_ContentPlaceHolder1_txtEmployee').value;
    console.log("txt====>"+txt);

    $.ajax({
        url:'{{baseURL}}showSearchUser',
        type:'POST',
        data:{
            'commitee':commitee,
            'usertype':usertype,
            'display':display,
            'txt':txt,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
         success:function(){
            $('#tdata').replaceWith($("#tdata",response))
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}


    });

}


function removeUser(){
    var checkboxes = document.getElementsByName('ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1');
    if ($('#tdata :checked').length == 0) {
        alert("Please Select User to Delete.");
    }
    else{
        if ($('#tdata :checked').length == 1) {
            var checkedValue = $('.checkbox:checked').val();
            var r = confirm("Are you sure you want to Delete User "+checkedValue+"?");
        }
        else{
            var r = confirm("Are you sure you want to Delete this Record ?");
        }


        if (r == true)
         {
            var selected=[]
            $("input:checkbox[name='ctl00$ContentPlaceHolder1$GridView1$ctl02$Checkbox1']:checked").each(function(){
                    selected.push($(this).val());
            });


                $.ajax({
                type: 'POST',
                url:'{{baseURL}}removeUser',
                data: { 'removeUser':selected,
                        'dataType': 'json',
                        'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success:function(response)
                {
                   alert("User Deleted Successfully. ")
                   location.reload();
                },
                complete:function(){},
                error:function (xhr, textStatus, thrownError){}
              });
            }

    }
}


function addUser(){
    var fname = document.getElementById('ctl00_ContentPlaceHolder1_txtName').value;
    var uname = document.getElementById('ctl00_ContentPlaceHolder1_txtUser').value;
    var empid = document.getElementById('ctl00_ContentPlaceHolder1_txtempid').value;
    var mobno = document.getElementById('ctl00_ContentPlaceHolder1_txtMobile').value;
    var emailid = document.getElementById('ctl00_ContentPlaceHolder1_txt_email').value;
    var jd = document.getElementById('ctl00_ContentPlaceHolder1_txtDate').value;

    var printChk = document.getElementById('ctl00_ContentPlaceHolder1_printacc');
    var print = "";
    if(printChk.checked == true){
        print="1";
        console.log("print checked===>"+print);
    }
    else{
        print = "0";
        console.log("print not checked=====>"+print);
    }

    var cmsChk = document.getElementById('ctl00_ContentPlaceHolder1_chkcmsFlag');
    var cmsflag = "";
    if(cmsChk.checked == true){
        cmsfalg="True";
        console.log("cmsflag checked===>"+cmsflag);
    }
    else{
        cmsflag = "False";
        console.log("cmsflag not checked=====>"+cmsflag);
    }


    var txtregex = /^[a-zA-Z\' \'\\s.]+$/;
    var emailregex = /^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/ ;
    var userregex = /^[a-zA-Z0-9_]+$/;
    var empidregex = /^[a-zA-Z0-9]+$/;
    var mobregex=/^[0-9]{10}$/;

    var validation = false;
    var isvalid = true;
    // validate full name
    if (fname == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator5').style.visibility = "visible";
        validation = true;
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator5').style.visibility = "hidden";
        if(txtregex.test(fname) === false){
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator2').style.visibility = "visible";
            validation = true;
            isvalid = false;
        }
        else{
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator2').style.visibility = "hidden";
            validation = false;
            isvalid = true;
        }
    }


    // Validate Email ID
    if (emailid == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator6').style.visibility = "visible";
        validation = true;
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator6').style.visibility = "hidden";
        if(emailregex.test(emailid) === false){
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator6').style.visibility = "visible";
            validation = true;
            isvalid=false;
        }
        else{
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator6').style.visibility = "hidden";
            validation = false;
            isvalid=true;
        }
    }

    // Validate USer Name
    if (uname == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator1').style.visibility = "visible";
        validation = true;
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator1').style.visibility = "hidden";
        if(userregex.test(uname) === false){
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator3').style.visibility = "visible";
            validation = true;
            isvalid=false;
        }
        else{
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator3').style.visibility = "hidden";
            validation = false;
            isvalid=true;
        }
    }


    // Validate Empid
    if (empid == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator4').style.visibility = "visible";
        validation = true;
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator4').style.visibility = "hidden";
        if(empidregex.test(empid) === false){
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator5').style.visibility = "visible";
            validation = true;
            isvalid=false;
        }
        else{
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator5').style.visibility = "hidden";
            validation = false;
            isvalid=true;
        }
    }



    // Validate Mobile Number
    if (mobno == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator3').style.visibility = "visible";
        validation = true;
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator3').style.visibility = "hidden";
        if(mobregex.test(mobno) === false){
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator1').style.visibility = "visible";
            validation = true;
            isvalid=false;
        }
        else{
            document.getElementById('ctl00_ContentPlaceHolder1_RegularExpressionValidator1').style.visibility = "hidden";
            validation = false;
            isvalid=true;
        }
    }


    // VAlidate jd
    if (jd == ""){
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator2').style.visibility = "visible";
        isvalid=false;
    }
    else{
        document.getElementById('ctl00_ContentPlaceHolder1_RequiredFieldValidator2').style.visibility = "hidden";
        isvalid=true;
    }

  //if (validation == false){
if(isvalid)
    $.ajax({
        url:'{{baseURL}}addUser',
        type:'POST',
        data:{
            'fname':fname,
            'uname':uname,
            'emailid':emailid,
            'mobno':mobno,
            'empid':empid,
            'jd':jd,
            'cmsflag':cmsflag,
            'print':print,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success:function(response){

            location.reload();
        },
        complete:function(){},
        error:function(xhr,textStatus,thrownError){}
    });
 }

 $( "#ctl00_ContentPlaceHolder1_txtDate" ).datepicker({
           maxDate: new Date,
        dateFormat: 'yy/mm/dd'

    });

$( "#txtEDate" ).datepicker({
           maxDate: new Date,
        dateFormat: 'yy/mm/dd'

    });


function viewEditUser(userid){
    console.log(userid);
    var chkprint = document.getElementById("chkprintE");
   var cmsflag = document.getElementById("chkcmsFlagE");
    $.ajax({
        type:'POST',
        url:'{{baseURL}}viewUser',
        data:{
                'userid':userid,

                'csrfmiddlewaretoken': '{{ csrf_token }}'
              },
        success:function(response){
            var o=JSON.parse(response);
            $('#txtEName').val(o.ename);
            $('#txtEUser').val(o.userid);
            $('#txtE_email').val(o.email);
            $('#txtEempid').val(o.empid);
            $('#txtEMobile').val(o.mobile);
            $('#txtEDate').val(formatDate(o.join_dt));
            if(o.printr == '1'){
                chkprint.checked = true;
            }else{
                chkprint.checked = false;
            }

            if(o.cmsflag == 'True'){
                cmsflag.checked = true;
            }else{
                cmsflag.checked = false;
            }

        },
        complete:function(){
        },
        error:function (xhr, textStatus, thrownError){}



    });
}

function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2)
        month = '0' + month;
    if (day.length < 2)
        day = '0' + day;

    return [year, month, day].join('/');
}


function updateUser(){
    var fname = document.getElementById('txtEName').value;
    var uname = document.getElementById('txtEUser').value;
    var empid = document.getElementById('txtEempid').value;
    var mobno = document.getElementById('txtEMobile').value;
    var emailid = document.getElementById('txtE_email').value;
    var jd = document.getElementById('txtEDate').value;

    var printChk = document.getElementById('chkprintE');
    var print = "";

    if(printChk.checked == true){

        print="1";
        console.log("print checked===>"+print);
    }
    else{

        print = "0";
        console.log("print not checked=====>"+print);
    }

    var cmsChk = document.getElementById('chkcmsFlagE');
    var cmsflag = "";
    if(cmsChk.checked == true){
        cmsflag="True";
        console.log("cmsflag checked===>"+cmsflag);
    }
    else{
        cmsflag = "False";
        console.log("cmsflag not checked=====>"+cmsflag);
    }


    var txtregex = /^[a-zA-Z\' \'\\s.]+$/;
    var emailregex = /^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/ ;
    var userregex = /^[a-zA-Z0-9_]+$/;
    var empidregex = /^[a-zA-Z0-9]+$/;
    var mobregex=/^[0-9]{10}$/;

    var validation = true;

    // validate full name
    if (fname == ""){
        document.getElementById('RequiredFieldValidator11').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator11').style.visibility = "hidden";
        if(txtregex.test(fname) === false){
            document.getElementById('RegularExpressionValidator11').style.visibility = "visible";
            validation = false;
        }
        else{
            document.getElementById('RegularExpressionValidator11').style.visibility = "hidden";
            validation = true;
        }
    }


    // Validate Email ID
    if (emailid == ""){
        document.getElementById('RequiredFieldValidator13').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator13').style.visibility = "hidden";
        if(emailregex.test(emailid) === false){
            document.getElementById('RegularExpressionValidator13').style.visibility = "visible";
            validation = false;
        }
        else{
            document.getElementById('RegularExpressionValidator13').style.visibility = "hidden";
            validation = true;
        }
    }

    // Validate USer Name
    if (uname == ""){
        document.getElementById('RequiredFieldValidator12').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator12').style.visibility = "hidden";
        if(userregex.test(uname) === false){
            document.getElementById('RegularExpressionValidator12').style.visibility = "visible";
            validation = false;
        }
        else{
            document.getElementById('RegularExpressionValidator12').style.visibility = "hidden";
            validation = true;
        }
    }


    // Validate Empid
    if (empid == ""){
        document.getElementById('RequiredFieldValidator14').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator14').style.visibility = "hidden";
        validation=true;

    }



    // Validate Mobile Number
    if (mobno == ""){
        document.getElementById('RequiredFieldValidator15').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator15').style.visibility = "hidden";
        if(mobregex.test(mobno) === false){
            document.getElementById('RegularExpressionValidator15').style.visibility = "visible";
            validation = false;
        }
        else{
            document.getElementById('RegularExpressionValidator15').style.visibility = "hidden";
            validation = true;
        }
    }


    // VAlidate jd
    if (jd == ""){
        document.getElementById('RequiredFieldValidator16').style.visibility = "visible";
        validation = false;
    }
    else{
        document.getElementById('RequiredFieldValidator16').style.visibility = "hidden";
        validation = true;
    }

    if (validation){
        $.ajax({
                    url:'{{baseURL}}updateUser',
                    type:'POST',
                    data:{
                    'fname':fname,
                    'uname':uname,
                    'emailid':emailid,
                    'mobno':mobno,
                    'empid':empid,
                    'jd':jd,
                    'cmsflag':cmsflag,
                    'print':print,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success:function(response){
                        alert("User Updated Successfully .");
                        location.reload();

                    },
                    complete:function(){},
                    error:function(xhr,textStatus,thrownError){}
                });
    }
}



</script>




</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 